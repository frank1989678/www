;$(function() {
	function addZeros(val) {
		return val.toString().length < 2 ? "0" + val : val;
    }

	var FlipClock = function() {
	    var j = false,
	        r = 0,
	        l = 0,
	        q = 0,
	        h, c, g,
	        n = $("#flipclock");


	    function start() {
	        r = 0;
	        l = 0;
	        q = 0;
	        var x = new Date(),
	            w = x.getMinutes(),
	            y = x.getSeconds(),
	            v = x.getHours();
	        c = w;
	        g = v;
	        k(w);
	        f(v);
	        s(y);
	    }

	    function resume() {
	        j = false;
	        setInterval(function() {
	        	a();
	        }, 1000);
	        
	    }

	    function a() {
	        if (j) {
	            return
	        }
	        var x = new Date(),
	            w = x.getMinutes(),
	            y = x.getSeconds(),
	            v = x.getHours();
	        if (h != y) {
	            h = y;
	            s(y)
	        }
	        if (c != w) {
	            c = w;
	            k(w)
	        }
	        if (g != v) {
	            g = v;
	            f(v)
	        }
	    }

	    function s(y) {
	        n.removeClass("play");
	        var x = $("ul.flip-second li.active"),
	            w;
	        if (x.html() == undefined) {
	            x = $("ul.flip-second li").eq(0);
	            x.addClass("before").removeClass("active").next("li").addClass("active").closest("#flipclock").addClass("play");
	            r = 0
	        } else {
	            if (x.is(":last-child")) {
	                $("ul.flip-second li").removeClass("before");
	                x.addClass("before").removeClass("active");
	                x = $("ul.flip-second li").eq(0);
	                x.addClass("active").closest("#flipclock").addClass("play");
	                r = -1
	            } else {
	                $("ul.flip-second li").removeClass("before");
	                x.addClass("before").removeClass("active").next("li").addClass("active").closest("#flipclock").addClass("play");
	                r = r + 1
	            }
	        }
	        var v = addZeros(y, 1);
	        w = $("ul.flip-second li").eq(r + 1);
	        w.find(".flip-text").html(v)
	    }

	    function k(x) {
	        n.removeClass("play");
	        var y = $("ul.flip-minute li.active"),
	            w;
	        if (y.html() == undefined) {
	            y = $("ul.flip-minute li").eq(0);
	            y.addClass("before").removeClass("active").next("li").addClass("active").closest("#flipclock").addClass("play");
	            l = 0
	        } else {
	            if (y.is(":last-child")) {
	                $("ul.flip-minute li").removeClass("before");
	                y.addClass("before").removeClass("active");
	                y = $("ul.flip-minute li").eq(0);
	                y.addClass("active").closest("#flipclock").addClass("play");
	                l = -1
	            } else {
	                $("ul.flip-minute li").removeClass("before");
	                y.addClass("before").removeClass("active").next("li").addClass("active").closest("#flipclock").addClass("play");
	                l = l + 1
	            }
	        }
	        var v = addZeros(x, 1);
	        w = $("ul.flip-minute li").eq(l + 1);
	        w.find(".flip-text").html(v)
	    }

	    function f(w) {
	        n.removeClass("play");
	        var y = $("ul.flip-hour li.active"),
	            x;
	        if (y.html() == undefined) {
	            y = $("ul.flip-hour li").eq(0);
	            y.addClass("before").removeClass("active").next("li").addClass("active").closest("#flipclock").addClass("play");
	            q = 0
	        } else {
	            if (y.is(":last-child")) {
	                $("ul.flip-hour li").removeClass("before");
	                y.addClass("before").removeClass("active");
	                y = $("ul.flip-hour li").eq(0);
	                y.addClass("active").closest("#flipclock").addClass("play");
	                q = -1
	            } else {
	                $("ul.flip-hour li").removeClass("before");
	                y.addClass("before").removeClass("active").next("li").addClass("active").closest("#flipclock").addClass("play");
	                q = q + 1
	            }
	        }
	        var v = "AM";
	        if (w > 12) {
	            w = w - 12;
	            v = "PM"
	        } else {
	            if (w == 12) {
	                v = "PM"
	            }
	        }
	        var z = addZeros(w, 1);
	        x = $("ul.flip-hour li").eq(q + 1);
	        x.find(".flip-text").html(z);
	        x.find(".flip-apm").html(v)
	    }

	    start();
	    resume();
	};

	FlipClock();
});