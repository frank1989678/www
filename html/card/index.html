<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>交通事故快速处理平台</title>
    <meta name="renderer" content="webkit" />
    <link rel="stylesheet" href="assets/css/style.css" />
    <link rel="stylesheet" href="assets/plugins/select2/select2.css" />
</head>
<body>

<!-- header begin -->
<div class="header cf">
	<div class="logo">
		<a href="index.html">武汉市车管所制证管理系统</a>
	</div>
	<div class="user"></div>
</div>
<!-- header end -->

<div class="side-menu">
	<dl>
		<dt>
			<a href="javascript:;">
				<i class="icon icon-1"></i>
				<span>流水打印管理</span>
				<i class="icon arrow"></i>
			</a>
		</dt>
		<dd>
			<a href="printManage.html">待打印信息</a>
			<a href="printHis.html">已打印查询</a>
		</dd>
	</dl>
	<dl>
		<dt>
			<a href="javascript:;">
				<i class="icon icon-2"></i>
				<span>制证管理</span>
				<i class="icon arrow"></i>
			</a>
		</dt>
		<dd>
			<a href="ab1.html">证件登记上屏</a>
			<a href="ab2.html">接收数据维护</a>
		</dd>
	</dl>
	<dl>
		<dt>
			<a href="javascript:;">
				<i class="icon icon-3"></i>
				<span>统计分析</span>
			</a>
		</dt>
	</dl>
	<dl>
		<dt>
			<a href="javascript:;">
				<i class="icon icon-4"></i>
				<span>系统管理</span>
				<i class="icon arrow"></i>
			</a>
		</dt>
		<dd>
			<a href="departmentManage.html">部门管理</a>
			<a href="roleManage.html">角色管理</a>
			<a href="purviewManage.html">权限管理</a>
			<a href="userManage.html">用户管理</a>
		</dd>
	</dl>

</div>

<div class="footer">
	<span>湖北省宏锐慧通信息技术有限公司</span>
</div>

<!-- 公用 -->
<script src="assets/js/jquery191.js"></script>
<script src="assets/plugins/layer/layer.js"></script>
<script src="assets/js/common.js"></script>


<script>
var _global = {
	init: function() {
	},
	filter: function() {
		var that = this;
		var $form = $('#filter');
		var page =  new Page({
			pageIndex: 1, // 当前页
			pageSize: 10, // 每页显示10条
			url: 'http://g.cn',
			callback: function(res) {
				$('#tbody').empty().html(template('tableTemp', res));
			}
		})
		
		// 查询
		$form.on('submit', function() {
			var filterData = $form.serializeArray();
			page.request(true, filterData);
			return false;
		})
	},
	chart: function() {
		var timer = 0;
		var chart1 = echarts.init(document.getElementById('chart1'));
        var chart3 = echarts.init(document.getElementById('chart3'));

        var chartReset = function() {
        	clearTimeout(timer);
        	timer = setTimeout(function() {
        		chart1.resize();
        		chart3.resize();
        	}, 50)
        }
        this.chart1(chart1);
        this.chart3(chart3);

        $(window).on('resize', chartReset);
	},
	chart1: function(chart1) {
        chart1.setOption({
            tooltip : {},
            backgroundColor: '#fff',
            color:['#4778c7', '#b39ddb', '#5ecba1', '#ffc400', '#dd4038'],
            title: {
                text: '今日事故',
        		left: '10%',
        		top: 20,
        		textStyle: {
        			color: '#5a738e',
        			fontWeight: 400
        		}
            },
		    legend: {
		        orient: 'vertical',
		        top: '32.56%',
		        left: '60%',
		        itemWidth: 12,
		        itemHeight: 12,
		        itemGap: 15,
		        selectedMode: false,
		        borderRadius: 0,
		        data: ['待处理','处理中','定责完成','异常关闭','处理完成']
		    },
            series: {
                type: 'pie',
                legendHoverLink: false,
                hoverAnimation: false,
                radius: ['0', '55%'],
                center: ['28%', '58.59%'],
                label: {
                	normal: {
                		show: false
                	}
                }
            }
        });

        var data1 = {
        	total: 126,
            legendData: {
            	'待处理': 3,
            	'处理中': 0,
            	'定责完成': 102,
            	'异常关闭': 21,
            	'处理完成': 0
            },
        	seriesData: [
        		{value: 3, name: '待处理'},
            	{value: 0, name: '处理中'},
            	{value: 102, name: '定责完成'},
            	{value: 21, name: '异常关闭'},
            	{value: 0, name: '处理完成'}
            ]
        }

        chart1.setOption({
        	title: {
        		text: '今日事故：' + data1.total
        	},
        	legend: {
        		formatter: function(name, key) {
        			return name + '（' +  data1.legendData[name] + '）'
        		}
        	},
        	series: {
        		data: data1.seriesData
        	}
        })
	},
	chart3: function(chart3) {
		chart3.setOption({
            title: {
                text: '近期处理事故数',
        		left: 30,
        		top: 10,
        		textStyle: {
        			color: '#5a738e',
        			fontWeight: 400
        		}
            }
		})
		var options = {
		    tooltip: {
		        trigger: 'axis'
		    },
            backgroundColor: '#fff',
		    legend: {
		        top: 10,
		        right: 30,
		        itemWidth: 12,
		        itemHeight: 12,
		        selectedMode: false,
		        borderRadius: 0,
		        data:['处理事故数']
		    },
		    grid: {
		        left: '3%',
		        right: '4%',
		        bottom: '3%',
		        containLabel: true,
		        borderWidth: 0
		    },
		    xAxis: {
                axisLine: {
                    lineStyle: {
                    	color: '#a9c7ff',
                    	width: 2
                    }
                },
                axisLabel: {
                	textStyle: {
					    color: function (value, index) {
					        return index%2 === 0 ? '#5a738e' : '#eb9335';
					    }
					}
                },
                data: []
		    },
		    yAxis: {
                axisLine: {
                    lineStyle: {
                    	color: '#a9c7ff',
                    	width: 2
                    }
                },
                axisLabel: {
                	textStyle: {
                		color: '#5a738e'
                	}
                },
		    	scale : true,
		    	splitLine: {
		    		lineStyle: {
		    			color: '#e6ecf9'
		    		}
		    	}
		    },
            series: {
                name: '处理事故数',
                type: 'line',
                itemStyle: {
                	normal: {
                		borderWidth: 5,
                		color: '#ffa511'
                	}
                },
                lineStyle: {
                	normal: {
                		color: '#ffa511',
                		opacity: 0.53,
                		width: 3
                	}
                },
                areaStyle: {
                	normal: {
                		color: '#ffa511',
                		opacity: 0.09
                	}
                },
                data: []
            }
        }

        $.ajax({
        	url: '',
        	data: {},
        	success: function(res) {
        		res = {
        			item: ['2017\n06-01', '2017\n06-02', '2017\n06-03', '2017\n06-04', '2017\n06-05', '2017\n06-06', '2017\n06-07', '2017\n06-08', '2017\n06-09', '2017\n06-10'],
        			value: [90, 160, 130, 110, 148, 120, 150, 155, 180, 170]
        		}
		        options.xAxis.data = res.item;
		        options.series.data = res.value;
		        chart3.setOption(options);
        	}
        })
	}
}
</script>
</body>
</html>