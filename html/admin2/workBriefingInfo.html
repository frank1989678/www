<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>交通事故信息管理平台</title>
    <meta name="renderer" content="webkit" />
    <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="assets/css/style.css" />
    <link rel="stylesheet" href="assets/plugins/datetimepicker/style.css" />
    <link rel="stylesheet" href="assets/plugins/select2/select2.css" />
</head>
<body>

<!-- header begin -->
<div class="header">
	<div class="inner">
		<div class="user">
			<dl>
				<dt>系统管理员<i class="ico ico-arrow-down"></i></dt>
				<dd>
					<a href="changePwd.html">修改密码</a>
					<a href="login.html">安全退出</a>
				</dd>
			</dl>
		</div>
		<div class="logo">
			<a href="index.html">武汉市交通事故信息管理平台</a>
		</div>
		<div class="nav">
			<dl>
				<dt><i class="ico ico-1"></i><span>用户信息</span></dt>
				<dd>
					<div class="scroll">
						<a href="userList.html">用户信息</a>
						<a href="insuranceMessage.html">保险公司信息</a>
					</div>
				</dd>
			</dl>
			<dl>
				<dt><i class="ico ico-2"></i><span>警保联动</span></dt>
				<dd>
					<div class="scroll">
						<a href="caseList.html">警保案件信息</a>
						<a href="showCaseSummaryList.html">案件处理登记</a>
					</div>
				</dd>
			</dl>

			<dl class="active">
				<dt><i class="ico ico-3"></i><span>警保统计</span></dt>
				<dd>
					<div class="scroll">
						<a href="caseInfoStatistics.html">案件信息统计</a>
						<a href="companyStatistics.html">查勘量统计(公司)</a>
						<a href="surveyMemberStatistics.html">查勘量统计(查勘员)</a>
						<a href="surveyMemberDayStatistics.html">考勤打卡查询</a>
						<a href="surveyMemberTimesStatistics.html">考勤打卡统计</a>
						<a href="jjlMng.html">车损事故报警量</a>
						<a href="workBriefingInfo.html" class="current">工作情况通报</a>
						<a href="handleCount.html">案件处理统计</a>
						<a href="accidentsCount.html">快处平台数据统计日报</a>
						<a href="accidentsMonthCount.html">快处平台数据统计月报</a>
						<a href="caseKcWarn.html">保险处理超时统计</a>
						<a href="statisticsView.html">大屏统计</a>
					</div>
				</dd>
			</dl>

			<dl>
				<dt><i class="ico ico-4"></i><span>系统设置</span></dt>
				<dd>
					<div class="scroll">
						<a href="rolesList.html">角色管理</a>
						<a href="smsContentList.html">警保短信模板</a>
						<a href="source.html">资源管理</a>
						<a href="showPage.html">job数据同步</a>
					</div>
				</dd>
			</dl>

			<dl>
				<dt><i class="ico ico-5"></i><span>快赔中心</span></dt>
				<dd>
					<div class="scroll">
						<a href="queryCase.html">快赔案件信息</a>
						<a href="queryKpPrivies.html">事故当事人信息</a>
						<a href="showKpDkCaseCount.html">代勘案件统计</a>
						<a href="showKpComCount.html">公司办理统计</a>
						<a href="showKpNetCount.html">网点办理统计</a>
						<a href="showKpCaseCount.html">受案登记统计</a>
						<a href="excaptionNoticeCount.html">事故频繁异常车辆预警</a>
						<a href="showPage2.html">快赔案件导出</a>
					</div>
				</dd>
			</dl>
		</div>
	</div>
</div>
<!-- header end -->



<!-- wrapper start -->
<div class="wrapper">
	<!-- filter start -->
	<div class="filter">
		<form id="filterForm" action="#!">
			<input type="text" class="ipt date" id="queryStartTime" />
			<i>-</i>
			<input type="text" class="ipt date" id="queryEndTime" />
			<button type="submit" class="ubtn ubtn-cyan">统计</button>
		</form>
	</div>
	<!-- filter end -->
	

	<div class="table">
		<div class="caption"><span>工作情况通报</span></div>
		<script id="tableTemp" type="text/html">
			{{each list as item i}}
			<tr>
				<td>{{item.col1}}</td>
				<td>{{item.col2}}</td>
				<td>{{item.col3}}</td>
				<td>{{item.col4}}</td>
				<td>{{item.col5}}</td>
				<td>{{item.col6}}%</td>
				<td>{{item.col7}}</td>
				<td>{{item.col8}}</td>
			</tr>
			{{/each}}
		</script>
		<table>
			<thead>
				<tr>
					<th>区域</th>
					<th>车损事故报警（数量）</th>
					<th>警保联动有效处理（数量）</th>
					<th>警保联动销案处理（数量）</th>
					<th>警保联动出警处理（数量）</th>
					<th>警保联动出警占比</th>
					<th>案均到达现场时间（分钟）</th>
					<th>案均处理时间（分钟）</th>
				</tr>
			</thead>
			<tbody id="tbody">
				<tr>
					<th>江岸区</th>
					<td>90</td>
					<td>84</td>
					<td>14</td>
					<td>5.6</td>
					<td>55%</td>
					<td>9</td>
					<td>6</td>
				</tr>
				<tr>
					<th>江汉区</th>
					<td>90</td>
					<td>84</td>
					<td>14</td>
					<td>5.6</td>
					<td>55%</td>
					<td>9</td>
					<td>6</td>
				</tr>
				<tr>
					<th>硚口区</th>
					<td>90</td>
					<td>84</td>
					<td>14</td>
					<td>5.6</td>
					<td>55%</td>
					<td>9</td>
					<td>6</td>
				</tr>
				<tr>
					<th>武昌区</th>
					<td>90</td>
					<td>84</td>
					<td>14</td>
					<td>5.6</td>
					<td>55%</td>
					<td>9</td>
					<td>6</td>
				</tr>
				<tr>
					<th>洪山区</th>
					<td>90</td>
					<td>84</td>
					<td>14</td>
					<td>5.6</td>
					<td>55%</td>
					<td>9</td>
					<td>6</td>
				</tr>
				<tr>
					<th>异常用车</th>
					<td>90</td>
					<td>84</td>
					<td>14</td>
					<td>5.6</td>
					<td>55%</td>
					<td>9</td>
					<td>6</td>
				</tr>
			</tbody>
		</table>

		<div class="charts">
			<div class="chart" id="chart1"></div>
			<div class="chart" id="chart2"></div>
		</div>
	</div>

</div>
<!-- wrapper end -->

<div class="footer">
	<p>开发单位：湖北易站通达电子科技有限公司 </p>
</div>


<script src="assets/js/jquery191.js"></script>
<script src="assets/plugins/datetimepicker/core.js"></script>
<script src="assets/plugins/layer/layer.js"></script>
<script src="assets/js/common.js"></script>
<script src="assets/js/art.template.js"></script>
<script src="assets/js/echarts.min.js"></script>

<!-- 拦截ajax请求并返回虚拟数据(只做演示使用，开发时请删除) -->
<script src="assets/js/mock.js"></script>
<script>
	Mock.setup({
	    timeout: '300-1000' // 表示响应时间介于 200 和 600 毫秒之间，默认值是'10-100'。
	})
	Mock.mock('http://g.cn', {
		"result": "SUCCESS",
	    "list|6": [{
	        "col1|1": ["江岸区","江汉区","硚口区","武昌区","洪山区"],
	    	"col2|80-100": 1,
	    	"col3|60-80": 1,
	    	"col4|10-30": 1,
	    	"col5|1-10.1": 1,
	    	"col6|20-50": 1,
	    	"col7|1-10": 1,
	    	"col8|1-10": 1
		}]
	});
</script>
<!-- 拦截ajax请求并返回虚拟数据(只做演示使用，开发时请删除) end -->

<script>
	!(function($) {
		var _global = {
			init: function() {
    			this.filterData = {}; // 搜索条件
				this.filter();
				this.chart();
				this.request(this.filterData, true); // 加载数据并初始化分页
			},
			filter: function() {
				var that = this;
				var $form = $('#filterForm');
				var $start = $('#queryStartTime');
				var $end = $('#queryEndTime');
				var $tbody = $("#tbody");
				$form.on('submit', function() {
					var start = $start.val(),
						end = $end.val();
					if (!start || start == '') {
						fx.alert("请选择开始时间");
						return;
					}
					if (!end || end == '') {
						fx.alert("请选择结束时间");
						return;
					}
					if(start > end){
						fx.alert("开始时间不得大于结束时间");
						return;
					}

					that.filterData = {"startTime":start, "endTime":end};
					that.request(that.filterData, true);
					return false;
				})

				$start.datetimepicker({
			        format: 'yyyy/mm/dd'
			    });
				$end.datetimepicker({
			        format: 'yyyy/mm/dd'
			    })
			},
			/**
			 * 添加删除classname
			 * @param  {Object} data ajax参数
			 * @param  {Boolean} initPage  是否初始化分页
			 */
			request: function(data) {
				var that = this;
				fx.request('http://g.cn', data, function(res){
					var area = ["江岸区","江汉区","硚口区","武昌区","洪山区","异常用车"];
					res.list[0].col1 = area[0];
					res.list[1].col1 = area[1];
					res.list[2].col1 = area[2];
					res.list[3].col1 = area[3];
					res.list[4].col1 = area[4];
					res.list[5].col1 = area[5];

					var model = template('tableTemp', res);
					$("#tbody").empty().html(model);
					that.updateChart(res.list);
				});
			},
			chart: function() {
				var that = this;
				this.chart1 = echarts.init(document.getElementById('chart1')),
				this.chart2 = echarts.init(document.getElementById('chart2'));

				this.option1 = {
					tooltip : {
				        trigger: 'axis'
				    },
				    xAxis : [{
				       data : ['江岸区', '江汉区', '硚口区', '武昌区', '洪山区']
				    }],
				    yAxis : [{}],
	                legend: {
	                    data: ['警保联动处理', '车损事故报警']
	                },
	                color: ['#26b99c', '#fdc453'],
	                barWidth: '25%',
                	barGap: '5%',
				    series : [
				        {
				            name:'警保联动处理',
				            type:'bar'
				        }, {
				            name:'车损事故报警',
				            type:'bar'
				        }
				    ]
				};
				this.option2 = {
					tooltip : {
				        trigger: 'axis'
				    },
				    xAxis : [{
				       data : ['江岸区', '江汉区', '硚口区', '武昌区', '洪山区']
				    }],
				    yAxis : [{}],
	                legend: {
	                    data: ['案件到达现场时间', '案件处理时间']
	                },
	                color: ['#01b0ff', '#72cbd9'],
	                barWidth: '25%',
                	barGap: '5%',
				    series : [
				        {
				            name:'案件到达现场时间',
				            type:'bar'
				        }, {
				            name:'案件处理时间',
				            type:'bar'
				        }
				    ]
				};

				that.chart1.setOption(this.option1);
				that.chart2.setOption(this.option2);

				var timer = 0;
				$(window).on('resize', function() {
					timer && clearTimeout(timer);
					timer = setTimeout(function() {
						 that.chart1.resize();
						 that.chart2.resize();
					}, 99);
				})
			},
			updateChart: function(data) {
				this.option1.series[1].data = [data[0].col2, data[1].col2, data[2].col2, data[3].col2, data[4].col2];
				this.option1.series[0].data = [data[0].col3, data[1].col3, data[2].col3, data[3].col3, data[4].col3];

				this.option2.series[0].data = [data[0].col7, data[1].col7, data[2].col7, data[3].col7, data[4].col7];
				this.option2.series[1].data = [data[0].col8, data[1].col8, data[2].col8, data[3].col8, data[4].col8];

				this.chart1.setOption(this.option1, true);
				this.chart2.setOption(this.option2, true);
			}
		}

		_global.init();
	})(jQuery);
</script>
</body>
</html>