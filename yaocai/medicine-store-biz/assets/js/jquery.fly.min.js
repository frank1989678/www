!function(t){function e(e,n){this.$element=t(e),this.settings=t.extend(!0,{},i,n),this.init()}var i={version:"1.0.0",autoPlay:!0,vertex_Rtop:20,speed:1.2,start:{},end:{},onEnd:t.noop};e.prototype={init:function(){this.setOptions(),this.play()},setOptions:function(){var e=this.settings,i=e.start,n=e.end;this.$element.css({marginTop:"0px",marginLeft:"0px",position:"fixed"}).appendTo("body"),null!=n.width&&null!=n.height&&t.extend(!0,i,{width:this.$element.width(),height:this.$element.height()});var o=Math.min(i.top,n.top)-Math.abs(i.left-n.left)/3;o<e.vertex_Rtop&&(o=Math.min(e.vertex_Rtop,Math.min(i.top,n.top)));var h=Math.sqrt(Math.pow(i.top-n.top,2)+Math.pow(i.left-n.left,2)),s=Math.ceil(Math.min(Math.max(Math.log(h)/.05-75,30),100)/e.speed),a=i.top==o?0:-Math.sqrt((n.top-o)/(i.top-o)),p=(a*i.left-n.left)/(a-1),l=n.left==p?0:(n.top-o)/Math.pow(n.left-p,2);t.extend(!0,e,{count:-1,steps:s,vertex_left:p,vertex_top:o,curvature:l})},play:function(){this.settings.autoPlay&&this.move()},move:function(){var e=this.settings,i=e.start,n=e.count,o=e.steps,h=e.end,s=i.left+(h.left-i.left)*n/o,a=0==e.curvature?i.top+(h.top-i.top)*n/o:e.curvature*Math.pow(s-e.vertex_left,2)+e.vertex_top;if(null!=h.width&&null!=h.height){var p=o/2,l=h.width-(h.width-i.width)*Math.cos(p>n?0:(n-p)/(o-p)*Math.PI/2),r=h.height-(h.height-i.height)*Math.cos(p>n?0:(n-p)/(o-p)*Math.PI/2);this.$element.css({width:l+"px",height:r+"px","font-size":Math.min(l,r)+"px"})}this.$element.css({left:s+"px",top:a+"px"}),e.count++;var f=window.requestAnimationFrame(t.proxy(this.move,this));n==o&&(window.cancelAnimationFrame(f),e.onEnd.apply(this))},destroy:function(){this.$element.remove()}},t.fn.fly=function(t){return this.each(function(){new e(this,t)})}}(window.Zepto||window.jQuery);